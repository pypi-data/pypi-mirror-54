{% extends "bee_django_exam/base.html" %}
{% load static %}
{% block content %}
    <form method="post">
        {% csrf_token %}
        {{ form.non_field_errors }}
        <li>
            {{ form.title.errors }}
            <label for="{{ form.title.id_for_label }}">标题:</label>{{ form.title }}
        </li>
        {#        <li>#}
        {#            {{ form.is_require.errors }}#}
        {#            <label for="{{ form.is_require.id_for_label }}">是否必选:</label>{{ form.is_require }}#}
        {#        </li>#}
        {{ form.context.errors }}
        <div id="editor"></div>
        <div style="display:none;">{{ form.context }}</div>
        <div id="edit_context" style="display:none;">{{ notice.context|default:''|safe }}</div>

        {#            <textarea name="context" rows="10" cols="40"#}
        {#                      id="id_context" style="display: none"></textarea>#}

        {#        <div id="editor"></div>#}
        {#        {{ form.as_ul }}#}


        <input type="submit" value="提交"/>
    </form>
{% endblock %}


{% block scripts %}
    <script>
        var editor;
        $(document).ready(function () {
            var E = window.wangEditor;
            var editor = new E('#editor');
            var $context = $('#id_context');

            editor.customConfig.onchange = function (html) {
                // 监控变化，同步更新到 textarea
                $context.val(html)
            };
            editor.create();
            // 初始化 textarea 的值
            var context = $("#edit_context").html();
            editor.txt.html(context);
            $context.val(context);

        });
    </script>
{% endblock %}