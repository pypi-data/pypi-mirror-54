(self.webpackJsonp=self.webpackJsonp||[]).push([[78],{207:function(e,n,t){"use strict";var o=t(252);t.d(n,"a",function(){return r});var r=Object(o.a)({types:{"entity-id":function(e){return"string"!=typeof e?"entity id should be a string":!!e.includes(".")||"entity id should be in the format 'domain.entity'"},icon:function(e){return"string"!=typeof e?"icon should be a string":!!e.includes(":")||"icon should be in the format 'mdi:icon'"}}})},458:function(e,n,t){"use strict";var o=t(0),r=t(407),i=t.n(r),a=(t(502),t(503)),s=t(18),c=t(96),l=t(1);!function(e){function n(){var n=e.call(this)||this;return i.a.commands.save=function(e){Object(s.a)(e.getWrapperElement(),"yaml-save")},n._value="",n.attachShadow({mode:"open"}).innerHTML="\n            <style>\n              "+a.a+"\n              .CodeMirror {\n                height: var(--code-mirror-height, auto);\n                direction: var(--code-mirror-direction, ltr);\n              }\n              .CodeMirror-scroll {\n                max-height: var(--code-mirror-max-height, --code-mirror-height);\n              }\n              .CodeMirror-gutters {\n                border-right: 1px solid var(--paper-input-container-color, var(--secondary-text-color));\n                background-color: var(--paper-dialog-background-color, var(--primary-background-color));\n                transition: 0.2s ease border-right;\n              }\n              .CodeMirror-focused .CodeMirror-gutters {\n                border-right: 2px solid var(--paper-input-container-focus-color, var(--primary-color));;\n              }\n              .CodeMirror-linenumber {\n                color: var(--paper-dialog-color, var(--primary-text-color));\n              }\n              .rtl .CodeMirror-vscrollbar {\n                right: auto;\n                left: 0px;\n              }\n              .rtl-gutter {\n                width: 20px;\n              }\n            </style>",n}Object(o.d)(n,e),Object.defineProperty(n.prototype,"hass",{set:function(e){this._hass=e,this._hass&&this.setScrollBarDirection()},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"value",{get:function(){return this.codemirror.getValue()},set:function(e){this.codemirror&&e!==this.codemirror.getValue()&&this.codemirror.setValue(e),this._value=e},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"hasComments",{get:function(){return!!this.shadowRoot.querySelector("span.cm-comment")},enumerable:!0,configurable:!0}),n.prototype.connectedCallback=function(){var e=this;this.codemirror?this.codemirror.refresh():(this.codemirror=i()(this.shadowRoot,{value:this._value,lineNumbers:!0,mode:"yaml",tabSize:2,autofocus:!0,viewportMargin:1/0,extraKeys:{Tab:"indentMore","Shift-Tab":"indentLess"},gutters:this._hass&&Object(c.a)(this._hass)?["rtl-gutter","CodeMirror-linenumbers"]:[]}),this.setScrollBarDirection(),this.codemirror.on("changes",function(){return e._onChange()}))},n.prototype._onChange=function(){Object(s.a)(this,"yaml-changed",{value:this.codemirror.getValue()})},n.prototype.setScrollBarDirection=function(){this.codemirror&&this.codemirror.getWrapperElement().classList.toggle("rtl",Object(c.a)(this._hass))},n=Object(o.c)([Object(l.d)("hui-yaml-editor")],n)}(HTMLElement)},710:function(e,n,t){"use strict";t.r(n);var o,r,i=t(0),a=t(1),s=t(73),c=t(319),l=t.n(c),d=(t(210),t(218),t(150),t(85),t(108),t(188),t(207)),h=(t(180),t(56)),u=(t(458),d.a.interface({title:"string?",views:["object"],resources:d.a.optional(["object"])})),p=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return Object(i.d)(n,e),Object.defineProperty(n,"properties",{get:function(){return{hass:{},lovelace:{},closeEditor:{},_saving:{},_changed:{}}},enumerable:!0,configurable:!0}),n.prototype.render=function(){return Object(a.f)(o||(o=Object(i.f)(['\n      <app-header-layout>\n        <app-header>\n          <app-toolbar>\n            <paper-icon-button\n              icon="hass:close"\n              @click="','"\n            ></paper-icon-button>\n            <div main-title>\n              ','\n            </div>\n            <div\n              class="save-button\n              ','"\n            >\n              ','\n            </div>\n            <mwc-button raised @click="','"\n              >','</mwc-button\n            >\n          </app-toolbar>\n        </app-header>\n        <div class="content">\n          <hui-yaml-editor\n            .hass="','"\n            @yaml-changed="','"\n            @yaml-save="','"\n          >\n          </hui-yaml-editor>\n        </div>\n      </app-header-layout>\n    '],['\n      <app-header-layout>\n        <app-header>\n          <app-toolbar>\n            <paper-icon-button\n              icon="hass:close"\n              @click="','"\n            ></paper-icon-button>\n            <div main-title>\n              ','\n            </div>\n            <div\n              class="save-button\n              ','"\n            >\n              ','\n            </div>\n            <mwc-button raised @click="','"\n              >','</mwc-button\n            >\n          </app-toolbar>\n        </app-header>\n        <div class="content">\n          <hui-yaml-editor\n            .hass="','"\n            @yaml-changed="','"\n            @yaml-save="','"\n          >\n          </hui-yaml-editor>\n        </div>\n      </app-header-layout>\n    '])),this._closeEditor,this.hass.localize("ui.panel.lovelace.editor.raw_editor.header"),Object(s.a)({saved:!1===this._saving||!0===this._changed}),this._changed?this.hass.localize("ui.panel.lovelace.editor.raw_editor.unsaved_changes"):this.hass.localize("ui.panel.lovelace.editor.raw_editor.saved"),this._handleSave,this.hass.localize("ui.panel.lovelace.editor.raw_editor.save"),this.hass,this._yamlChanged,this._handleSave)},n.prototype.firstUpdated=function(){this.yamlEditor.value=l.a.safeDump(this.lovelace.config),this.yamlEditor.codemirror.clearHistory(),this._generation=this.yamlEditor.codemirror.changeGeneration(!0)},Object.defineProperty(n,"styles",{get:function(){return[h.a,Object(a.c)(r||(r=Object(i.f)(["\n        :host {\n          --code-mirror-height: 100%;\n        }\n\n        app-header-layout {\n          height: 100vh;\n        }\n\n        app-toolbar {\n          background-color: var(--dark-background-color, #455a64);\n          color: var(--dark-text-color);\n        }\n\n        .comments {\n          font-size: 16px;\n        }\n\n        .content {\n          height: calc(100vh - 68px);\n        }\n\n        hui-code-editor {\n          height: 100%;\n        }\n\n        .save-button {\n          opacity: 0;\n          font-size: 14px;\n          padding: 0px 10px;\n        }\n\n        .saved {\n          opacity: 1;\n        }\n      "],["\n        :host {\n          --code-mirror-height: 100%;\n        }\n\n        app-header-layout {\n          height: 100vh;\n        }\n\n        app-toolbar {\n          background-color: var(--dark-background-color, #455a64);\n          color: var(--dark-text-color);\n        }\n\n        .comments {\n          font-size: 16px;\n        }\n\n        .content {\n          height: calc(100vh - 68px);\n        }\n\n        hui-code-editor {\n          height: 100%;\n        }\n\n        .save-button {\n          opacity: 0;\n          font-size: 14px;\n          padding: 0px 10px;\n        }\n\n        .saved {\n          opacity: 1;\n        }\n      "])))]},enumerable:!0,configurable:!0}),n.prototype._yamlChanged=function(){this._generation&&(this._changed=!this.yamlEditor.codemirror.isClean(this._generation),this._changed&&!window.onbeforeunload?window.onbeforeunload=function(){return!0}:!this._changed&&window.onbeforeunload&&(window.onbeforeunload=null))},n.prototype._closeEditor=function(){this._changed&&!confirm("You have unsaved changes, are you sure you want to exit?")||(window.onbeforeunload=null,this.closeEditor&&this.closeEditor())},n.prototype._handleSave=function(){return Object(i.b)(this,void 0,void 0,function(){var e,n;return Object(i.e)(this,function(t){switch(t.label){case 0:if(this._saving=!0,this.yamlEditor.hasComments&&!confirm("Your config contains comment(s), these will not be saved. Do you want to continue?"))return[2];try{e=l.a.safeLoad(this.yamlEditor.value)}catch(o){return alert("Unable to parse YAML: "+o),this._saving=!1,[2]}try{e=u(e)}catch(o){return alert("Your config is not valid: "+o),[2]}t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this.lovelace.saveConfig(e)];case 2:return t.sent(),[3,4];case 3:return n=t.sent(),alert("Unable to save YAML: "+n),[3,4];case 4:return this._generation=this.yamlEditor.codemirror.changeGeneration(!0),window.onbeforeunload=null,this._saving=!1,this._changed=!1,[2]}})})},Object.defineProperty(n.prototype,"yamlEditor",{get:function(){return this.shadowRoot.querySelector("hui-yaml-editor")},enumerable:!0,configurable:!0}),n}(a.a);customElements.define("hui-editor",p)}}]);
//# sourceMappingURL=chunk.9b651f7288a3ca90f4fb.js.map