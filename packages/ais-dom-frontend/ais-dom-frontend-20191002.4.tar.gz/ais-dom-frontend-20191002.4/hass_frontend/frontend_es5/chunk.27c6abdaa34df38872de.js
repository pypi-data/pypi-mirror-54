(self.webpackJsonp=self.webpackJsonp||[]).push([[24],{781:function(t,n,e){"use strict";e.r(n);var i,a,s,o,c,r,d,h,p,u,l=e(0),b=e(1),f=e(124),g=(e(108),e(151),e(160),e(178),e(184),e(196),e(322)),y=e(505),_=e(206),v=e(18),O=e(48),j=e(506),x=e(177),w=e(121),m=function(t){return void 0===t.should_expose||t.should_expose};!function(t){function n(){var n=null!==t&&t.apply(this,arguments)||this;return n._entityConfigs={},n._popstateSyncAttached=!1,n._popstateReloadStatusAttached=!1,n._getEntityFilterFunc=Object(f.a)(function(t){return Object(y.a)(t.include_domains,t.include_entities,t.exclude_domains,t.exclude_entities)}),n}Object(l.d)(n,t),n.prototype.render=function(){var t=this;if(void 0===this._entities)return Object(b.f)(i||(i=Object(l.f)(["\n        <hass-loading-screen></hass-loading-screen>\n      "],["\n        <hass-loading-screen></hass-loading-screen>\n      "])));var n=Object(y.b)(this.cloudStatus.google_entities),e=this._getEntityFilterFunc(this.cloudStatus.google_entities),u=this._isInitialExposed||new Set,f=void 0===this._isInitialExposed,g=0,_=[],v=[];return this._entities.forEach(function(i){var o=t.hass.states[i.entity_id],c=t._entityConfigs[i.entity_id]||{},r=n?m(c):e(i.entity_id);r&&(g++,f&&u.add(i.entity_id)),(u.has(i.entity_id)?_:v).push(Object(b.f)(s||(s=Object(l.f)(['\n        <ha-card>\n          <div class="card-content">\n            <state-info\n              .hass=',"\n              .stateObj=","\n              secondary-line\n              @click=","\n            >\n              ","\n            </state-info>\n            <ha-switch\n              .entityId=","\n              .disabled=","\n              .checked=","\n              @change=","\n            >\n              Expose to Google Assistant\n            </ha-switch>\n            ","\n          </div>\n        </ha-card>\n      "],['\n        <ha-card>\n          <div class="card-content">\n            <state-info\n              .hass=',"\n              .stateObj=","\n              secondary-line\n              @click=","\n            >\n              ","\n            </state-info>\n            <ha-switch\n              .entityId=","\n              .disabled=","\n              .checked=","\n              @change=","\n            >\n              Expose to Google Assistant\n            </ha-switch>\n            ","\n          </div>\n        </ha-card>\n      "])),t.hass,o,t._showMoreInfo,i.traits.map(function(t){return t.substr(t.lastIndexOf(".")+1)}).join(", "),i.entity_id,!n,r,t._exposeChanged,i.might_2fa?Object(b.f)(a||(a=Object(l.f)(["\n                  <ha-switch\n                    .entityId=","\n                    .checked=","\n                    @change=","\n                  >\n                    Disable two factor authentication\n                  </ha-switch>\n                "],["\n                  <ha-switch\n                    .entityId=","\n                    .checked=","\n                    @change=","\n                  >\n                    Disable two factor authentication\n                  </ha-switch>\n                "])),i.entity_id,Boolean(c.disable_2fa),t._disable2FAChanged):""))}),f&&(this._isInitialExposed=u),Object(b.f)(p||(p=Object(l.f)(['\n      <hass-subpage header="Google Assistant">\n        <span slot="toolbar-icon">\n          ',"","\n        </span>\n        ","\n        ","\n          ","\n          ","\n        </div>\n      </hass-subpage>\n    "],['\n      <hass-subpage header="Google Assistant">\n        <span slot="toolbar-icon">\n          ',"","\n        </span>\n        ","\n        ","\n          ","\n          ","\n        </div>\n      </hass-subpage>\n    "])),g,this.narrow?"":Object(b.f)(o||(o=Object(l.f)(["\n            selected\n          "],["\n            selected\n          "]))),n?Object(b.f)(c||(c=Object(l.f)(['\n                <paper-icon-button\n                  slot="toolbar-icon"\n                  icon="hass:tune"\n                  @click=',"\n                ></paper-icon-button>\n              "],['\n                <paper-icon-button\n                  slot="toolbar-icon"\n                  icon="hass:tune"\n                  @click=',"\n                ></paper-icon-button>\n              "])),this._openDomainToggler):"",n?"":Object(b.f)(r||(r=Object(l.f)(['\n                <div class="banner">\n                  Editing which entities are exposed via this UI is disabled\n                  because you have configured entity filters in\n                  configuration.yaml.\n                </div>\n              '],['\n                <div class="banner">\n                  Editing which entities are exposed via this UI is disabled\n                  because you have configured entity filters in\n                  configuration.yaml.\n                </div>\n              ']))),_.length>0?Object(b.f)(d||(d=Object(l.f)(['\n                  <h1>Exposed entities</h1>\n                  <div class="content">',"</div>\n                "],['\n                  <h1>Exposed entities</h1>\n                  <div class="content">',"</div>\n                "])),_):"",v.length>0?Object(b.f)(h||(h=Object(l.f)(['\n                  <h1>Not Exposed entities</h1>\n                  <div class="content">',"</div>\n                "],['\n                  <h1>Not Exposed entities</h1>\n                  <div class="content">',"</div>\n                "])),v):"")},n.prototype.firstUpdated=function(n){t.prototype.firstUpdated.call(this,n),this._fetchData()},n.prototype.updated=function(n){t.prototype.updated.call(this,n),n.has("cloudStatus")&&(this._entityConfigs=this.cloudStatus.prefs.google_entity_configs)},n.prototype._fetchData=function(){return Object(l.b)(this,void 0,void 0,function(){var t,n=this;return Object(l.e)(this,function(e){switch(e.label){case 0:return[4,(i=this.hass,i.callWS({type:"cloud/google_assistant/entities"}))];case 1:return(t=e.sent()).sort(function(t,e){var i=n.hass.states[t.entity_id],a=n.hass.states[e.entity_id];return Object(_.b)(i?Object(x.a)(i):t.entity_id,a?Object(x.a)(a):e.entity_id)}),this._entities=t,[2]}var i})})},n.prototype._showMoreInfo=function(t){var n=t.currentTarget.stateObj.entity_id;Object(v.a)(this,"hass-more-info",{entityId:n})},n.prototype._exposeChanged=function(t){return Object(l.b)(this,void 0,void 0,function(){var n,e;return Object(l.e)(this,function(i){switch(i.label){case 0:return n=t.currentTarget.entityId,e=t.target.checked,[4,this._updateExposed(n,e)];case 1:return i.sent(),[2]}})})},n.prototype._updateExposed=function(t,n){return Object(l.b)(this,void 0,void 0,function(){var e;return Object(l.e)(this,function(i){switch(i.label){case 0:return e=m(this._entityConfigs[t]||{}),n===e?[2]:[4,this._updateConfig(t,{should_expose:n})];case 1:return i.sent(),this._ensureEntitySync(),[2]}})})},n.prototype._disable2FAChanged=function(t){return Object(l.b)(this,void 0,void 0,function(){var n,e,i;return Object(l.e)(this,function(a){switch(a.label){case 0:return n=t.currentTarget.entityId,e=t.target.checked,i=Boolean((this._entityConfigs[n]||{}).disable_2fa),e===i?[2]:[4,this._updateConfig(n,{disable_2fa:e})];case 1:return a.sent(),[2]}})})},n.prototype._updateConfig=function(t,n){return Object(l.b)(this,void 0,void 0,function(){var e,i;return Object(l.e)(this,function(a){switch(a.label){case 0:return[4,Object(g.i)(this.hass,t,n)];case 1:return e=a.sent(),this._entityConfigs=Object(l.a)(Object(l.a)({},this._entityConfigs),((i={})[t]=e,i)),this._ensureStatusReload(),[2]}})})},n.prototype._openDomainToggler=function(){var t=this;Object(j.a)(this,{domains:this._entities.map(function(t){return Object(w.a)(t.entity_id)}).filter(function(t,n,e){return e.indexOf(t)===n}),toggleDomain:function(n,e){t._entities.forEach(function(i){Object(w.a)(i.entity_id)===n&&t._updateExposed(i.entity_id,e)})}})},n.prototype._ensureStatusReload=function(){if(!this._popstateReloadStatusAttached){this._popstateReloadStatusAttached=!0;var t=this.parentElement;window.addEventListener("popstate",function(){return Object(v.a)(t,"ha-refresh-cloud-status")},{once:!0})}},n.prototype._ensureEntitySync=function(){var t=this;if(!this._popstateSyncAttached){this._popstateSyncAttached=!0;var n=this.parentElement;window.addEventListener("popstate",function(){Object(O.a)(n,{message:"Synchronizing changes to Google."}),Object(g.a)(t.hass)},{once:!0})}},Object.defineProperty(n,"styles",{get:function(){return Object(b.c)(u||(u=Object(l.f)(["\n      .banner {\n        color: var(--primary-text-color);\n        background-color: var(\n          --ha-card-background,\n          var(--paper-card-background-color, white)\n        );\n        padding: 16px 8px;\n        text-align: center;\n      }\n      h1 {\n        color: var(--primary-text-color);\n        font-size: 24px;\n        letter-spacing: -0.012em;\n        margin-bottom: 0;\n        padding: 0 8px;\n      }\n      .content {\n        display: flex;\n        flex-wrap: wrap;\n        padding: 4px;\n      }\n      ha-card {\n        margin: 4px;\n        width: 100%;\n        max-width: 300px;\n      }\n      .card-content {\n        padding-bottom: 12px;\n      }\n      state-info {\n        cursor: pointer;\n      }\n      ha-switch {\n        padding: 8px 0;\n      }\n\n      @media all and (max-width: 450px) {\n        ha-card {\n          max-width: 100%;\n        }\n      }\n    "],["\n      .banner {\n        color: var(--primary-text-color);\n        background-color: var(\n          --ha-card-background,\n          var(--paper-card-background-color, white)\n        );\n        padding: 16px 8px;\n        text-align: center;\n      }\n      h1 {\n        color: var(--primary-text-color);\n        font-size: 24px;\n        letter-spacing: -0.012em;\n        margin-bottom: 0;\n        padding: 0 8px;\n      }\n      .content {\n        display: flex;\n        flex-wrap: wrap;\n        padding: 4px;\n      }\n      ha-card {\n        margin: 4px;\n        width: 100%;\n        max-width: 300px;\n      }\n      .card-content {\n        padding-bottom: 12px;\n      }\n      state-info {\n        cursor: pointer;\n      }\n      ha-switch {\n        padding: 8px 0;\n      }\n\n      @media all and (max-width: 450px) {\n        ha-card {\n          max-width: 100%;\n        }\n      }\n    "])))},enumerable:!0,configurable:!0}),Object(l.c)([Object(b.g)()],n.prototype,"hass",void 0),Object(l.c)([Object(b.g)()],n.prototype,"cloudStatus",void 0),Object(l.c)([Object(b.g)()],n.prototype,"narrow",void 0),Object(l.c)([Object(b.g)()],n.prototype,"_entities",void 0),Object(l.c)([Object(b.g)()],n.prototype,"_entityConfigs",void 0),n=Object(l.c)([Object(b.d)("cloud-google-assistant")],n)}(b.a)}}]);
//# sourceMappingURL=chunk.27c6abdaa34df38872de.js.map